---
# Keep this so Jekyll processes Liquid before SCSS
---

{% assign books = site.posts | where: 'layout', 'book' %}
{% assign features = site.posts | where: 'layout', 'feature' %}
{%- assign t = site.data[site.lang] -%}

.home #content {
  background-image: url("{{ '/wp-content/themes/nyukeywords/images/default_bg.jpg' | relative_url }}");
}

/// Redefine variables from node_modules/bootstrap/scss/_variables.scss
$gray-100: #efefef;
$gray-600: #f3f3f3;
$gray-800: #666;
$link-hover-color: #333;
$link-decoration: underline;
$font-family-sans-serif: Georgia, Times New Roman, serif;
$headings-font-family: Open Sans, sans-serif;
$enable-rounded: false;
$body-color: #000;
$navbar-padding-y: 0;
$navbar-padding-x: 0;
$nav-link-padding-y: 0;
$nav-link-padding-x: 2rem;
$breadcrumb-margin-bottom: 0;
$breadcrumb-bg: transparent;
$breadcrumb-divider-color: $gray-800;
$breadcrumb-active-color: $gray-800;
$breadcrumb-divider: "{{ t.breadbar.separator }}";
$breadcrumb-item-padding: 10px;

$container-max-widths: (
  lg: 820px,
  xl: 821px
);

$sizes: (
  100vh: 100vh,
  100vw: 100vw,
  sidebar: 21.25rem
);

/// These measurements were taken from the original design
$spacers: (
  "10px": 10px,
  "20px": 20px,
  "24px": 24px,
  "34px": 34px,
  "50px": 50px,
  "55px": 55px,
  "73px": 73px,
  6: 4.5rem
);

$opacities: (
  0: -100%,
  1: -80%,
  2: -60%,
  3: -40%,
  4: -20%,
  5: 0%
);

/// Add new colors from books and features
$colors: (
{% for book in books %}
  "{{ book.slug }}": {{ book.color }},
{% endfor %}
{% for feature in features %}
  "{{ feature.slug }}": {{ feature.color }},
{% endfor %}
  "site": {{ site.color }},
  "black": #000,
  "gray-light": $gray-100
);

$theme-colors: (
{% for book in books %}
  "{{ book.slug }}": {{ book.color }},
{% endfor %}
{% for feature in features %}
  "{{ feature.slug }}": {{ feature.color }},
{% endfor %}
  "site": {{ site.color }}
);

/// Since the content HTML comes from Markdown, we need to define their
/// their style inside a .content.
{% for book in books %}
.content-{{ book.slug }} {
  mark {
    background-color: {{ feature.color }} !important;
  }

  a {
    color: {{ book.color }} !important;
  }
}
{% endfor %}
{% for feature in features %}
.content-{{ feature.slug }} {
  mark {
    background-color: {{ feature.color }} !important;
  }

  a {
    color: {{ feature.color }} !important;
    font-weight: bold;
  }
}
{% endfor %}

// Links in works cited need break lines, since they can be really long
.work-cited {
  a {
    word-break: break-all;
  }
}

// https://fonts.googleapis.com/css?family=Open+Sans:300,700
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 300;
  src: url(../fonts/opensans/v20/mem5YaGs126MiZpBA-UN_r8OUuhs-subset.woff2) format('woff2');
}
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  src: url(../fonts/opensans/v20/mem5YaGs126MiZpBA-UN7rgOUuhs-subset.woff2) format('woff2');
}

@import "bootstrap/scss/bootstrap";
@import "fork-awesome/scss/fork-awesome";
@import "helpers";

p {
  margin-bottom: 2rem;
}

{% comment %}
If the separator is a ForkAwesome icon, define it as one.
{% endcomment %}
{% if t.breadbar.fa_separator %}
  .breadcrumb-item {
    + .breadcrumb-item {
      &::before {
        @include fa-icon();
      }
    }
  }
{% endif %}
